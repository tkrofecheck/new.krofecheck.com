var myApp;myApp||(myApp={}),define(["jquery","underscore","handlebars","masonry","tools"],function(a,b,c,d){myApp.dynamicStylesheet=function(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}(),a.fn.imagesLoaded=function(b){var c=this.find("img"),d=[],e=this,f=c.length;return c.length?(c.one("load error",function(){0===--f&&(f=c.length,c.one("load error",function(){0===--f&&b.call(e)}).each(function(b){a(this).load(function(){var a=".grid-item:nth-child("+(b+1)+").gigante",c="max-width: "+this.width+"px !important;";myApp.Tools.addCSSRule(myApp.dynamicStylesheet,a,c,0)}),this.src=d.shift()}))}).each(function(){d.push(this.src),this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}),this):(b.call(this),this)},a.fn.autolink=function(){return this.each(function(){var b=/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g;a(this).html(a(this).html().replace(b,'<br/><a href="$1" target="_blank">See Example</a> '))})},a(function(){myApp.Tools.setupListener(myApp,"dataReady",function(a){a===!0&&myApp.Tools.getSections()}),myApp.Tools.customModal.injectScript(),a(window).on("navComplete",function(){var b=a("section");a.each(b,function(){var b=a(this),c=0;"portfolio-container"===b.context.id&&(c=10),b.css({top:a("#nav-container nav").outerHeight()+c})})}),window.location.href.indexOf("localhost")>-1&&window.location.href.indexOf("dist")>-1||-1===window.location.href.indexOf("dist")&&-1===window.location.href.indexOf("build")?myApp.Tools.getData(myApp):require(["app/nav","app/about","app/resume","app/portfolio"],function(){myApp.Tools.getSections()})})});var myApp;myApp||(myApp={}),myApp.Nav=function(){return{el:"#nav-container",dataFile:"nav.json",dataKey:"nav",HandlebarsTemplate:{attr:{id:"nav-template",type:"text/x-handlebars-template"},html:"".concat("<nav>",'<div class="social">',"{{#each social}}","{{#if this.display}}",'<a href="{{this.url}}" class="{{this.font-icon}}"></a>',"{{/if}}","{{/each}}","</div>",'<div class="site">',"{{#each site-links}}","{{#if this.display}}",'<a class="{{this.class}}">{{this.text}}</a>',"{{/if}}","{{/each}}","</div>","</nav>")},init:function(){var a=this;return myApp.Tools.setupListener(a,"dataReady",function(b){b===!0&&a.render()}),$("#"+a.HandlebarsTemplate.attr.id).length||myApp.Tools.injectScript(a.HandlebarsTemplate),function(){var b=!0;myApp.data&&myApp.data.length>0&&$.each(myApp.data,function(){return"nav"in this?(a.data=$.extend(!0,a.data,this.nav),b=!1,!0):void 0}),b?myApp.Tools.getData(a):a.render()}(),a},unbindEvents:function(){var a=this;$(a.el).unbind("click tap","a")},bindEvents:function(){var a=this,b=$("body"),c=$(myApp.About.el),d=$(myApp.Resume.el),e=$(myApp.Portfolio.el);a.unbindEvents(),$(a.el).find("a").on("click tap",function(a){var f=$(a.currentTarget);a.stopPropagation(),f.hasClass("about-lnk")&&(b.addClass("about-active").removeClass("resume-active").removeClass("portfolio-active"),c.show(),d.hide(),e.hide()),f.hasClass("resume-lnk")&&(b.addClass("resume-active").removeClass("about-active").removeClass("portfolio-active"),c.hide(),d.show(),e.hide()),f.hasClass("portfolio-lnk")&&(b.hasClass("portfolio-active")||(b.addClass("portfolio-active").removeClass("about-active").removeClass("resume-active"),c.hide(),d.hide(),e.show(),e.trigger("fixMasonry")))})},render:function(){var a=this;require(["handlebars"],function(b){var c=$("#nav-template"),d=$(a.el),e=c.html(),f=b.compile(e),g=a.data||{},h=f(g);d.html(h),a.bindEvents(),$(window).trigger("navComplete")})}}}();var myApp;myApp||(myApp={}),myApp.About=function(){return{el:"#about-container",dataFile:"about.json",dataKey:"about",HandlebarsTemplate:{attr:{id:"about-template",type:"text/x-handlebars-template"},html:"".concat("{{#each paragraphs}}","{{#if this.display}}",'<div class="bio">',"<h4>{{this.name}}</h4>",'<div class="image-wrap">','<img src="{{this.image}}" alt="Photo: Tim Krofecheck"/>',"</div>","<span>{{{this.text}}}</span>","</div>","{{/if}}","{{/each}}")},init:function(){var a=this;return $(a.el).position().top=$("nav").innerHeight()+"px",myApp.Tools.setupListener(a,"dataReady",function(b){b===!0&&(myApp.updated=a.data.updated.time,a.render())}),$("#"+a.HandlebarsTemplate.attr.id).length||myApp.Tools.injectScript(a.HandlebarsTemplate),function(){var b=!0;myApp.data&&myApp.data.length>0&&$.each(myApp.data,function(){return"about"in this?(a.data=$.extend(!0,a.data,this.about),myApp.updated=a.data.updated.time,b=!1,!0):void 0}),b?myApp.Tools.getData(a):a.render()}(),a},bindEvents:function(){},render:function(){var a=this;require(["handlebars","masonry"],function(b,c){var d=$("#about-template"),e=$(a.el),f=d.html(),g=b.compile(f),h=a.data||{},i=g(h);e.html(i),$(".copyright").html(a.data.copyright)}),a.bindEvents()}}}();var myApp;myApp||(myApp={}),myApp.Resume=function(){return{el:"#resume-container",dataFile:"resume.json",dataKey:"resume",HandlebarsTemplate:{attr:{id:"resume-template",type:"text/x-handlebars-template"},html:"".concat("<div></div>")},init:function(){var a=this;myApp.Tools.setupListener(a,"dataReady",function(b){b===!0&&a.render()}),$("#"+a.HandlebarsTemplate.attr.id).length||myApp.Tools.injectScript(a.HandlebarsTemplate),function(){var b=!0;myApp.data&&myApp.data.length>0&&$.each(myApp.data,function(){return"resume"in this?(a.data=$.extend(!0,a.data,this.resume),b=!1,!0):void 0}),b?myApp.Tools.getData(a):a.render()}()},bindEvents:function(){},render:function(){var a=this;require(["handlebars","masonry"],function(b,c){var d=$("#resume-template"),e=$(a.el),f=d.html(),g=b.compile(f),h=a.data||{},i=g(h);e.html(i)}),a.bindEvents()}}}();var myApp;myApp||(myApp={}),myApp.Portfolio=function(){return{el:"#portfolio-container",dataFile:"portfolio.json",dataKey:"portfolio",HandlebarsTemplate:{attr:{id:"portfolio-template",type:"text/x-handlebars-template"},html:"".concat('<div id="portfolio-projects" class="grid">',"{{#each projects}}","{{#if this.display}}","{{#each this.steps}}",'<div class="grid-item tile-width{{#if this.width2}} tile-width-x2{{/if}}{{#if this.gigante}} gigante{{/if}}">','<img src="images/portfolio/{{../this.folder}}/{{this.image}}?v='+myApp.updated+'" />',"{{#if this.text}}<span>{{this.text}}</span>{{/if}}","</div>","{{/each}}","{{/if}}","{{/each}}","</div>",'<div class="tile-settings">','<div class="toolbar">','<div class="header">Tools</div>','<div class="buttons">','<input id="size-normal" type="radio" name="size" value="normal" checked>','<input id="size-tile2x" type="radio" name="size" value="tile2x" />','<input id="size-gigante" type="radio" name="size" value="gigante" />','<input id="remove-tiles" type="checkbox" name="remove" value="remove" />','<input id="reload-tiles" type="button" name="reload-tiles" value="Reload Tiles"/>',"</div>","</div>","</div>")},init:function(){var a=this;myApp.Tools.setupListener(a,"dataReady",function(b){b===!0&&a.render()}),$("#"+a.HandlebarsTemplate.attr.id).length||myApp.Tools.injectScript(a.HandlebarsTemplate),function(){var b=!0;myApp.data&&myApp.data.length>0&&$.each(myApp.data,function(){return"portfolio"in this?(a.data=$.extend(!0,a.data,this.portfolio),b=!1,!0):void 0}),b?myApp.Tools.getData(a):a.render()}()},unbindEvents:function(){var a=this;return a.$grid.unbind(),$(a.el).unbind(),$(window).unbind(),!1},bindEvents:function(){var a=this,b=$("html"),c=$("body"),d=$(window).outerHeight();$(a.el).bind("fixMasonry",function(){a.$grid.masonry("layout"),a.$grid.attr("data-orig-csstext")||a.$grid.attr("data-orig-csstext",a.$grid.attr("style")),a.$grid.attr("style",a.$grid.attr("data-orig-csstext")+" margin-bottom: "+$(".toolbar").innerHeight()+"px !important"),a.$grid.masonry("layout")}),$(a.el).bind("reloadTiles",function(){c.addClass("reload-tiles"),a.init()}),a.$grid.on("click tap",".grid-item",function(){var d=this,e=$(d),f=e.find("span");if(c.hasClass("remove-tiles"))a.$grid.masonry("remove",d),a.$grid.masonry("layout");else if(b.hasClass("touch"))f.hasClass("visible")?f.removeClass("visible"):f.addClass("visible");else{if(window.innerWidth<444)return!1;e.toggleClass("gigante"),f.hasClass("visible")?f.removeClass("visible"):f.addClass("visible"),a.$grid.masonry("layout")}}),$(window).bind("resizeEnd",function(){a.$grid.masonry("reloadItems"),a.$grid.masonry("layout")}),$(window).on("resize orientationchange",function(){return $(window).outerHeight()===d?!1:(this.resizeTO&&clearTimeout(this.resizeTO),void(this.resizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},500)))}),a.$grid.on("click tap",".grid-item a",function(a){a.stopPropagation()}),$(a.el).on("click tap",'input[name="reload-tiles"]',function(b){b.stopPropagation(),myApp.Tools.customModal.init({title:"Reload Tiles?",message:"Would you like to reload all tiles (including the tiles removed)?",text:{yes:"Yes",no:"No"},choice:{yes:function(){$(a.el).trigger("reloadTiles")},no:function(){return!1}}})}),$(a.el).on("change",'input:checkbox[name="remove"]',function(a){a.stopPropagation(),this.checked?(c.addClass("remove-tiles"),$('input:radio[name="size"]').attr("disabled",!0)):(c.removeClass("remove-tiles"),$('input:radio[name="size"]').attr("disabled",!1))}),$(a.el).on("change",'input:radio[name="size"]',function(b){b.stopPropagation();var c=this,d=$(".grid-item");c.checked&&window.innerWidth>444&&($.each(d,function(){var a=$(this);"tile2x"===c.value?(a.addClass("tile-width-x2").removeClass("gigante"),a.find("span").addClass("visible")):"gigante"===c.value?(a.removeClass("tile-width-x2").addClass("gigante"),a.find("span").addClass("visible")):(a.removeClass("tile-width-x2").removeClass("gigante"),a.find("span").removeClass("visible"))}),$(a.el).trigger("fixMasonry"))})},render:function(){var a=this;"undefined"!=typeof a.$grid&&null!==a.$grid&&(a.$grid.masonry("destroy"),a.unbindEvents()),require(["handlebars","masonry"],function(b,c){var d=$("body"),e=$("#portfolio-template"),f=$(a.el),g=e.html(),h=b.compile(g),i=a.data||{},j=h(i);f.html(j),$(".grid-item").autolink(),require(["jquery-bridget/jquery.bridget"],function(){$.bridget("masonry",c),a.$grid=$("#portfolio-projects.grid").imagesLoaded(function(){a.$grid.masonry({isInitLayout:!1,itemSelector:".grid-item",columnWidth:".tile-width",gutter:10,isFitWidth:!0,isOriginTop:!0}),a.$grid.masonry("layout")}),d.hasClass("reload-tiles")?d.removeClass("reload-tiles"):$(a.el).hide(),$($('input:radio[name="size"]')[0]).prop("checked",!0),a.bindEvents()})})}}}();